// ==UserScript==
// @name         private_chat_notify_sound
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  Sound a notification when posted in private chat
// @author       nagao
// @match        https://minesweeper.online/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=minesweeper.online
// @grant        none
// ==/UserScript==

{
    'use strict';

    // sound: 【SE】チリリン（お知らせ）(https://commons.nicovideo.jp/material/nc283418)
    const audioData = 'data:audio/mpeg;base64,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x6tHTfZSrKdeqv/y78vi3An4Eay9+XP/yG//v/I8KOKP4+2///pN4SNfAM19NfFf4Rw+B4ew+omqmpRgCbMxwCsF7IPM3jidGBISZDX7QdOQjzJD11BsB1VzqPpz0a9Fav/7/uLg7/O//F3/7fxLCJW+NH4Gn8p/IMq7CP/7UmR7AfIdP1V5O5wQE8dZcEgKtAi8/U+DbmzATZKbQXBamNXAjV3//+in///v6brra4ArACCAjBE0lYVSdpaXA3UllVirMQXrOOCPBiEoy7x6aGmqyFBLZVTLq//65kCK/6//zP///IpSt8vf1///COOKDDX1X//X/Bhr5r////1Vzc3c2HABcxawJuEl4MNRKGn+pnp+gnDSR/88k6BEDydEB5gRJNOEMgk//+o/+Sc6EY51O5CHOjf/9At+vg1AMPx/KSg8j8uUHkflpeU5//tSZHkA8eQ/XPntUyQUgeawAvaAB6z7YaNlrNBUEptBcF8If//+CX/++oCUoDUANZhois10zkrDc//+B4p9Q2tMqEJSMkllMJT4JDsXQaqCUToTF7//6N/loaUqFYxgoCf/iTp4CsDP8qXjWULy0alig2Llcv//+CoNzu3e5YAGABAgEdk4XBeDljUiyQL3GZFkNMCCEuT0fv/////+5EG3+j/+Yf//6yzlYRQwYh4H0+kDOl//CIgBggCIg/////BkJeYqIlnABuE0gF0+L6H/+1JkfYDx5Drd+QYtkBWkqWABqoIHpL+DpDBWUFcSpkAGngDQbELmOhoxZQCUWtM6BIE5V//Rdbq9f//7gwNf6f/n///8c6ixkpXknljJeBs9zPeFJ/C7I///o////6kM3KyzYAADQM2Ok4YmyJSUicOFJ6j9NAp1kYBFAKUJhT/Ph+N/6//zT///KhtZl+qkkEWe8KT+VFFFVUKCz///vt////6A3NzNeABoP4EJl3Asx4vpubH/ujq7mY/vQpYPBshZ/uBwJ///7///4gDKcv/7UmSBgPGCOtt40GwAGISoAAKVcAYg63ngpUHQYAcawA7dwLwWz3QZDV2//7////8Il6oML1P/6AaIiHZwEXAMkDUfmeiJVD8tS2gPCiaARijWBZHq9v6/70nToV///nCP/V/+j///nG6v6v/9WEa7AGHr///q/CIg2DCFQKqoihgARDOLLySajK9NJWeTYvk46BFw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/L5+d/nP/45vwiBQGgUBgUsANgcVf4rH+S/BuD///AgPwJHwXQxPgRBXCJ6+V3qbv//////6fUkAjACf4g8YjVH6nTl/Qxh00AiAcwP/+1JklwHicj9LwP2rMA/htoAC/oEJzP01Y/KLAEUG2kgL+gKDozTsozSFAwODoGgcgH8lyW9DatNHz+f/+Qvww8LTwBs0MX8i/lv+G1lr//+CAKgwjD8QnwQgEhOrwM93/1f8Rf/3P9r9/+goAAFvGH5H/jMAhpX+k0D+gTMNBs5vjSviGGioARwWR8liUkvnM7zv//8hPhq0GAQB5rA2eBP45v+S3C2JL//GJ/BvKBJYi6/C0wYoAQAKDhzf/////XVb9qvs1CL//8IiB+CYqv/7UmSOgfJlPsqqHaugDmG2gAL+gQm4/S0D9qsAPQaYgACNwHSO68P8sBymHJH2BnChgYpFIMFAMFEGAL/////BgD/Bg+COtA6iPv4cL/8DCoU///wMGDYDhANCIM/CI+gDhGZaLFL3MN////////aqBgf/+HlAPw+aaj5pqf5h+H519MZ+iTJh+eph8TP+IoFwsRXFBf///4ZT8GE4DDHNAwwTv4RAf/4GAhH///hEyAakAYRAQMAfwiNwM4Oz3yuGq/////+hP+j/QDFv//Cy//tSZIkPgl0/Sim8q6AQQbaGAAIOiLT7GAl6rkA+htnEC/oEADoDwvALxC8Aib/ywLAYsGqQHTc1ARGOERjgwY8GAT/////wYBP8GCSAxJNPA1PCS///wiGr///CJGAMbQIYMBD/PhHixBifw/9f//////+qBi3//hE0DZfoEyyBZP/MMYMY0U4wgN/xQAMSRQAMSYksLzwvL/////8GBqAw1H/BjDP//8IhL///wiSQIgzgwGfwMJYSgAAAAMAAAIBwjYWj////////2JBkU/3/+1Jkho/iVD7GAn2roBAhtkEC/4CI0O8MCnrQAD6HGEAQXOBt/AxjjGBjbzxscsY3nj43A0/nwlBlvcESRgIkjH/+tr////CIg1AxBohVA3XAQb/2//+//+ESaYGDMqP7ECLDUIj3//////V97nO6nh0Gev//hE1gZrNUGGqETVwMkYbgwNT0rQM+JQQMoB8QYUAGCT//////+ETpAfoDp///////CK3gYt8AAJQI/6z1p7/////6g7IySmgBnbLtVb8VkYjqvhsw0MNgNjxwM//7UmSEj6IqPsMCnrOQE0G3jQKhgYgs6ugLbu4AQIaXWAAcOAUlMkA/6pk1My3Zdl3V/b//iCwgsBFwH54xf//////COAZmIACwGkrjzNPrvW3rXq1BG7kqbqOEHf0c4ytrySucHEW2Xynynym2W2W2XynynzW2avKfJOLhYLI//1B4GRGaBRQsgnFw390hBEyiIRoZGRgugbY0yFTLqyLtnF2QZFRZqB4oLf/8VFBaTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//tSZIYN8cg6vQK3tAARAAVoAAInBvjrGEnucEAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+1Jkm4/x+CbGCZk0EAAADSAAAAEFOETUAwUnAAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==';

    const audio = new Audio(audioData);

    const targetNode = document.getElementsByClassName('menu_chat_count')[1];

    const regexPattern = /^\(\d+\+?\)(?: \+(\d+))?$/;

    let lastMessageCount = 0;

    const notify = () => {
        const match = targetNode.textContent.match(regexPattern);
        if(match) {
            const currentMessageCount = parseInt(match[1] ?? 0);
            if(currentMessageCount > lastMessageCount) {
                audio.play();
            }
            lastMessageCount = currentMessageCount;
        }
    }

    const observer = new MutationObserver(notify);

    const config = { childList: true };

    observer.observe(targetNode, config);
}
